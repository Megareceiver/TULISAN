<!DOCTYPE html>
<html>
	<head>
		<!-- Standard Meta -->
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<link rel="icon" type="image/x-icon" href="../assets/PICS/TL_Favicon.png">
		<!-- Site Properities -->
		<title>Tulisan</title>

		<link href="../assets/css/bootstrap.min.css" rel="stylesheet">
		<link href="../assets/css/font-awesome.min.css" rel="stylesheet">
		<link href="../assets/css/syncard-inject.css" rel="stylesheet">
	</head>
	<body>

		<div class="container">
			<header class="parent"></header>

			<main class="parent clear"></main>

			<footer class="parent"></footer>
		</div>

		<!-- Script collection -->
		<script type="text/javascript" src="../assets/js/jquery-3.2.1.min.js"></script>
		<script type="text/javascript" src="../assets/js/jquery-ui-1.10.0.custom.min.js"></script>
		<script type="text/javascript" src="../assets/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../assets/js/imagesloaded.pkgd.min.js"></script>
		<script type="text/javascript" src="../assets/js/partial.js"></script>
		<script type="text/javascript" src="../assets/js/public.js"></script>

		<!-- page script -->
		<script type="text/javascript">
			loadShop();

			function loadShop(){
				var html 		= '';
				var data 		= [];
				var story 	= [];
				var color 	= [];
				var filter  = [];

				// data.description = data.description.replace(/(?:\r\n|\r|\n)/g, '<br />');
				// data.story = data.story.replace(/(?:\r\n|\r|\n)/g, '<br />');

				if(getParam('q') != "" && getParam('q') != null){
					data = p_getData('operation', 'productDetail', '1', 'idData = "' + getParam('q') + '"');
					data = data.feedData;

					story = p_getData('operation', 'cms_storyFetch', '1', 'idData = "' + data.storyId + '"');
					story = story.feedData;

					color = p_getData('operation', 'colorFetch', '1', 'idData = "' + data.colorId + '"');
					color = color.feedData;
				}

				html = '<div class="col-md-10 col-md-offset-1 div-normalize">';

				html = html +
				'<div class="col-md-6">'+
					'<div class="col-md-10 col-md-offset-1"><img class="big-image" src="../assets/products/' + data.picture + '"/></div>'+
					'<div class="clearfix"></div>' +
					'<div class="color-choice">'+
						'<ul>';

				//color
				var pattern = data.pattern;
					pattern = pattern.split(',');
				for(var loop=0; loop<pattern.length; loop++){
					html = html + '<li style="background-image : url(\'../assets/patterns/' + pattern[loop] + '\')"></li>';
				}

				html = html +
						'</ul>'+
					'</div>'+
				'</div>';

				html = html +
					'<div class="col-md-6">'+
								'<div class="product-desc">'+
									'<h1 class="fontserif"><b>' + data.name + '</b> <small> Rp. ' + data.price + '</small></h1>'+
									'<p>' + data.description + '</p>'+
									'<p>'+
										'COLOR<br>'+
										color.name +
									'</p>'+
									'<p>'+
										'MATERIAL<br>'+
										data.material +
									'</p>'+
									'<p>'+
										'DIMENSION<br>'+
										data.dimension +
									'</p>'+
								'</div>'+
								'<hr/>' +
								'<div class="input-group">' +
							    '<span class="input-group-addon"><i class="glyphicon glyphicon-plus"></i></span>' +
							    '<input type="text" class="form-control" placeholder="Email">' +
									'<span class="input-group-addon"><i class="glyphicon glyphicon-minus"></i></span>' +
							  '</div>' +
								'<button type="button" class="btn btn-warning margin-top" item-id="' + data.idData + '">Add to cart</button>' +
						'</div>'+
				"</div><div class='clearfix'></div>";
				html = html +
				'<hr/>' +
				'<div class="col-md-10 col-md-offset-1 product-story center-div margin-top div-normalize">'+
					'<h4>' + story.title + '</h4>' +
					'<p class="margin-top">' + Base64.decode(story.description) + '</p>' +
				'</div>';

				html = html + "</div><div class='clearfix'></div>";

				html = html +
				'<hr/>' +
				'<div class="row margin-top">' +
					'<div class="col-md-12">' +
						"<div class='blog-box'>"+
							"<div class='blog-pic'>";

				// for(var loop=0; loop<story.length; loop++){

					html = html +  "<img src='../assets/stories/" + story.picture + "' />";
				// }

				data.description = data.description.replace(/(?:\r\n|\r|\n)/g, '<br />');

				html = html +
							"</div>"+
						"</div>" +
					"</div>" +
				"</div>";
				html = html + "</div><div class='clearfix'></div>";

				$("main").html(html);
				$("#custom-bread-detail").html(toTitleCase(data.name));

			}

			var count = 1;
			var elem  = document.getElementById("count");
			function plus(){
					count++;
					elem.value = count;
			}

			function minus(){
				if (count > 1) {
					count--;
					elem.value = count;
				}
			}
		</script>
	</body>
</html>
